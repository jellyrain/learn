<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Linux&Shell/Shell/文本处理">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<title data-rh="true">文本处理 | jellyrain笔记小站</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://jellyrain.github.io/learn/Linux&amp;Shell/Shell/文本处理"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="文本处理 | jellyrain笔记小站"><meta data-rh="true" name="description" content="正则表达式 语法：正则表达式"><meta data-rh="true" property="og:description" content="正则表达式 语法：正则表达式"><link data-rh="true" rel="icon" href="/learn/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jellyrain.github.io/learn/Linux&amp;Shell/Shell/文本处理"><link data-rh="true" rel="alternate" href="https://jellyrain.github.io/learn/Linux&amp;Shell/Shell/文本处理" hreflang="en"><link data-rh="true" rel="alternate" href="https://jellyrain.github.io/learn/Linux&amp;Shell/Shell/文本处理" hreflang="x-default"><link rel="stylesheet" href="/learn/assets/css/styles.b2a6bbef.css">
<link rel="preload" href="/learn/assets/js/runtime~main.e544f3c4.js" as="script">
<link rel="preload" href="/learn/assets/js/main.de0215e4.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/learn/"><div class="navbar__logo"><img src="/learn/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/learn/img/logo.svg" alt="My Site Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Jellyrain</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/learn/">文档</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/jellyrain" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/learn/">介绍</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/DBeaver/DBeaver快捷键">DBeaver</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/DataBase/数据仓库/数据仓库概述">DataBase</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/Hadoop/Hadoop简介">Hadoop</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/Hive/Hive概述">Hive</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/Java/Maven/简介">Java</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/learn/Linux&amp;Shell/Linux/Linux概述">Linux&amp;Shell</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/learn/Linux&amp;Shell/Linux/Linux概述">Linux</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" tabindex="0" href="/learn/Linux&amp;Shell/Shell/Shell概述">Shell</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/Shell概述">Shell概述</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/基础">基础</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/变量">变量</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/运算符">运算符</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/流程控制">流程控制</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/获取控制台输入">获取控制台输入</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/learn/Linux&amp;Shell/Shell/函数">函数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/learn/Linux&amp;Shell/Shell/文本处理">文本处理</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/Markdown/Markdown 基本语法">Markdown</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/SQL/DCL/grant">SQL</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/XPath/XPath（基础）">XPath</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/Zookeeper/Zookeeper概述">Zookeeper</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/web/HTML/HTML 介绍">web</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/正则表达式/正则表达式（基础）">正则表达式</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/learn/计算机网络/软件结构">计算机网络</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/learn/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Linux&amp;Shell</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Shell</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">文本处理</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>文本处理</h1></header><p>正则表达式 语法：<a href="https://jellyrain.github.io/learn/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%EF%BC%88%E5%9F%BA%E7%A1%80%EF%BC%89/" target="_blank" rel="noopener noreferrer">正则表达式</a></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="1-cut">1. cut：<a class="hash-link" href="#1-cut" title="Direct link to heading">​</a></h2><p>cut 的工作就是“剪”，具体的说就是在文件中负责剪切数据用的。cut 命令从文件的每 一行剪切字节、字符和字段并将这些字节、字符和字段输出。</p><ol><li><p>基本用法</p><p>cut <!-- -->[选项参数]<!-- --> filename </p><p>说明：默认分隔符是制表符</p></li><li><p>选项参数说明</p><table><thead><tr><th>选项参数</th><th>功能</th></tr></thead><tbody><tr><td>-f</td><td>列号，提取第几列</td></tr><tr><td>-d</td><td>分隔符，按照指定分隔符分割列</td></tr><tr><td>-c</td><td>指定具体的字符</td></tr></tbody></table></li><li><p>示例</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">ifconfig</span><span class="token plain"> ens32 </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> netmask </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cut</span><span class="token plain"> -d </span><span class="token string" style="color:#e3116c">&quot; &quot;</span><span class="token plain"> -f </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># 根据空格分组 取第10组 （不会多个空格算一个空格）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">192.168</span><span class="token plain">.231.128</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="2-linux-文本三剑客">2. Linux 文本三剑客：<a class="hash-link" href="#2-linux-文本三剑客" title="Direct link to heading">​</a></h2><table><thead><tr><th>命令</th><th>特点</th><th>特点</th></tr></thead><tbody><tr><td>grep</td><td>过滤</td><td>过滤速度最快</td></tr><tr><td>sed</td><td>替换/修改内容，取行</td><td>替换/修改内容，取出范围内容</td></tr><tr><td>awk</td><td>取列，统计计算</td><td>取列，对比，统计计算</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-grep">1. grep：<a class="hash-link" href="#1-grep" title="Direct link to heading">​</a></h3><p>grep命令是一种强大的文本搜索工具，它能使用<strong>正则表达式</strong>搜索文本，并把匹配的行打印出来（<strong>匹配到的标红</strong>）</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">option</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> pattern </span><span class="token function" style="color:#d73a49">file</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>参数（option）</th><th>描述</th></tr></thead><tbody><tr><td>-A&lt;显示行数&gt;</td><td>除了显示符合范本样式的那一列之外，并显示该行之后的内容</td></tr><tr><td>-B&lt;显示行数&gt;</td><td>除了显示符合样式的那一行之外，并显示该行之前的内容</td></tr><tr><td>-C&lt;显示行数&gt;</td><td>除了显示符合样式的那一行之外，并显示该行之前后的内容</td></tr><tr><td>-c</td><td>仅列出统计匹配的行数</td></tr><tr><td>-e</td><td>实现多个选项间的逻辑or 关系</td></tr><tr><td>-E</td><td>扩展的正则表达式</td></tr><tr><td>-P</td><td>可以让grep使⽤perl的正则表达式语法（完整体正则）</td></tr><tr><td>-i</td><td>忽略字符大小写</td></tr><tr><td>-n</td><td>显示匹配的行号</td></tr><tr><td>-o</td><td>仅显示匹配到的字符串</td></tr><tr><td>-v</td><td>显示不被pattern 匹配到的行，相当于[^] 反向匹配</td></tr><tr><td>-w</td><td>把表达式当做一个完整的单字符来搜寻，忽略那些部分匹配的行</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-sed">2. sed：<a class="hash-link" href="#2-sed" title="Direct link to heading">​</a></h3><p>sed 是一种流编辑器，它一次处理一<strong>行</strong>内容。处理时，把当前处理的行存储在临时缓冲区中，称为“<strong>模式空间</strong>”（patternspace ），接着用sed 命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;[地址定界] command&#x27;</span><span class="token plain"> file</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">s</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>参数（options）</th><th>描述</th></tr></thead><tbody><tr><td>-n</td><td>不输出模式空间内容到屏幕，即不自动打印，只打印匹配到的行</td></tr><tr><td>-e</td><td>多点编辑，对每行处理时，可以有多个Script</td></tr><tr><td>-f</td><td>把Script写到文件当中，在执行sed时-f 指定文件路径，如果是多个Script，换行写</td></tr><tr><td>-r</td><td>支持<strong>扩展的正则</strong>表达式</td></tr><tr><td>-i</td><td>直接将处理的结果写入文件</td></tr><tr><td>-i.bak</td><td>在将处理的结果写入文件之前备份一份</td></tr></tbody></table><table><thead><tr><th>地址定界</th><th>描述</th></tr></thead><tbody><tr><td>不给地址</td><td>对全文进行处理</td></tr><tr><td>#</td><td>指定的行</td></tr><tr><td>$</td><td>最后一行</td></tr><tr><td>/pattern/</td><td>被此处模式所能够匹配到的每一行</td></tr><tr><td>#<!-- -->,#</td><td>行 到 行</td></tr><tr><td>#<!-- -->,$#</td><td>行 到 最后一行</td></tr><tr><td>/pattern/,/pattern/</td><td>正则匹配 到 正则匹配</td></tr><tr><td>#<!-- -->,/pattern/</td><td>行 到 正则匹配</td></tr><tr><td>~</td><td>步进 （<strong>1~2p</strong>）（从第1行，一次加2行）</td></tr></tbody></table><table><thead><tr><th>编辑命令（command）</th><th>描述</th></tr></thead><tbody><tr><td>d</td><td><strong>删除</strong>模式空间匹配的行，并立即启用下一轮循环</td></tr><tr><td>p</td><td><strong>打印</strong>当前模式空间内容，追加到默认输出之后</td></tr><tr><td>a</td><td>在指定行<strong>后面追加</strong>文本，支持使用\n实现多行追加</td></tr><tr><td>i</td><td>在行<strong>前面插入</strong>文本，支持使用\n实现多行追加</td></tr><tr><td>c</td><td><strong>替换</strong>行为单行或多行文本，支持使用\n实现多行追加</td></tr><tr><td>w</td><td>保存模式匹配的行至指定文件</td></tr><tr><td>r</td><td>读取指定文件的文本至模式空间中匹配到的行后</td></tr><tr><td>=</td><td>为模式空间中的行打印行号</td></tr><tr><td>!</td><td>模式空间中匹配行<strong>取反</strong>处理</td></tr></tbody></table><p><strong>编辑命令（command）</strong>：</p><p><strong>s///</strong>：<strong>查找替换</strong>，支持使用其它分隔符，如：s@@@，s###；</p><ul><li><p>g：表示行内全局替换</p><p>在替换时，可以加一下命令，实现大小写转换</p></li><li><p>\l：把下个字符转换成小写</p></li><li><p>\L：把replacement字母转换成小写，直到\U或\E出现</p></li><li><p>\u：把下个字符转换成大写</p></li><li><p>\U：把replacement字母转换成大写，直到\L或\E出现</p></li><li><p>\E：停止以\L或\U开始的大小写转换</p></li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">将sed.txt文件中的第二行删除并将wo替换为ni</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sed</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&#x27;2d&#x27;</span><span class="token plain"> -e </span><span class="token string" style="color:#e3116c">&#x27;s#wo#ni#g&#x27;</span><span class="token plain"> sed.txt</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>注意：</p><ol><li>使用范围时，如果后范围不存在 就遍历到最后一行 </li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-awk">3. awk：<a class="hash-link" href="#3-awk" title="Direct link to heading">​</a></h3><p>awk是一种编程语言，用于在linux/unix下对文本和数据进行处理。数据可以来自标准输入(stdin)、一个或多个文件，或其它命令的输出。它<strong>支持用户自定义函数</strong>和动态正则表达式等先进功能，是linux/unix下的一个强大编程工具。它在命令行中使用，但更多是作为脚本来使用。<strong>awk有很多内建的功能</strong>，比如数组、函数等，这是它和C语言的相同之处，灵活性是awk最大的优势</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;program&#x27;</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value file…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> -f programfile </span><span class="token assign-left variable" style="color:#36acaa">var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value file…</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">awk</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">options</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;BEGIN{ action;… } pattern{ action;… } END{ action;… }&#x27;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">file</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>参数（options）</th><th>描述</th></tr></thead><tbody><tr><td>-F fs</td><td>fs指定输入分隔符，fs可以是字符串或正则表达式</td></tr><tr><td>-v var=value</td><td>赋值一个用户定义变量，将外部变量传递给awk</td></tr><tr><td>-f scripfile</td><td>从脚本文件中读取awk命令</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="1-awk-变量">1. awk 变量：<a class="hash-link" href="#1-awk-变量" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-内置变量">1. 内置变量：<a class="hash-link" href="#1-内置变量" title="Direct link to heading">​</a></h5><table><thead><tr><th>变量</th><th>描述</th></tr></thead><tbody><tr><td><strong>FS</strong></td><td><strong>输入字段分隔符，默认为空白字符</strong></td></tr><tr><td><strong>OFS</strong></td><td><strong>输出字段分隔符</strong>，默认为空白字符</td></tr><tr><td>RS</td><td><strong>输入记录分隔符</strong>，指定输入时的换行符，原换行符仍有效</td></tr><tr><td>ORS</td><td><strong>输出记录分隔符</strong>，输出时用指定符号代替换行符</td></tr><tr><td><strong>NF</strong></td><td>字段数量，共有多少字段， <strong>$NF引用最后一列，$(NF-1)引用倒数第2列</strong></td></tr><tr><td><strong>NR</strong></td><td><strong>行号</strong>，后可跟多个文件，第二个文件行号继续从第一个文件最后行号开始</td></tr><tr><td>FNR</td><td>各文件分别计数, 行号，后跟一个文件和NR一样，跟多个文件，第二个文件<strong>行号从1开始</strong></td></tr><tr><td>FILENAME</td><td><strong>当前文件名</strong></td></tr><tr><td>ARGC</td><td><strong>命令行参数</strong>的个数</td></tr><tr><td>ARGV</td><td>数组，保存的是命令行所给定的各参数，<strong>查看参数</strong></td></tr></tbody></table><p>示例：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello:world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux:redhat:lalala:hahaha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:love:youou</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -v FS=&#x27;:&#x27; &#x27;{print $1,$2}&#x27; awkdemo  #FS指定输入分隔符</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux redhat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along love</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -v FS=&#x27;:&#x27; -v OFS=&#x27;---&#x27; &#x27;{print $1,$2}&#x27; awkdemo  #OFS指定输出分隔符</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello---world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux---redhat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along---love</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -v RS=&#x27;:&#x27; &#x27;{print $1,$2}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">world linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redhat</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lalala</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hahaha along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">love</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">you</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -v FS=&#x27;:&#x27; -v ORS=&#x27;---&#x27; &#x27;{print $1,$2}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello world---linux redhat---along love---</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{print NF}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{print $(NF-1)}&#x27; awkdemo  #显示倒数第2列</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lalala</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">love</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-自定义变量">2. 自定义变量：<a class="hash-link" href="#2-自定义变量" title="Direct link to heading">​</a></h5><p>自定义变量（区分字符大小写）</p><h6 class="anchor anchorWithStickyNavbar_LWe7" id="1--v-varvalue">1. -v var=value<a class="hash-link" href="#1--v-varvalue" title="Direct link to heading">​</a></h6><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">① 先定义变量，后执行动作print</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -v name=&quot;along&quot; -F: &#x27;{print name&quot;:&quot;$0}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:hello:world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:linux:redhat:lalala:hahaha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:along:love:you</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">② 在执行动作print后定义变量 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">首行无效</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{print name&quot;:&quot;$0;name=&quot;along&quot;}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">:hello:world</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:linux:redhat:lalala:hahaha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:along:love:you</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="2-在-program-中直接定义">2. 在 program 中直接定义<a class="hash-link" href="#2-在-program-中直接定义" title="Direct link to heading">​</a></h6><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">可以把执行的动作放在脚本中，直接调用脚本 -f</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat awk.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;along&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">print name,</span><span class="token variable" style="color:#36acaa">$1</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: -f awk.txt awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along along</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="2-printf-命令c语言的-printf">2. printf 命令（C语言的 printf）：<a class="hash-link" href="#2-printf-命令c语言的-printf" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-格式化输出">1. 格式化输出：<a class="hash-link" href="#1-格式化输出" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token builtin class-name">printf</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;FORMAT&quot;</span><span class="token plain">, item1,item2, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>①  必须指定FORMAT</p><p>②  <strong>不会自动换行，需要显式给出换行控制符，\n</strong></p><p>③  FORMAT 中需要分别为后面每个item 指定格式符</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-格式符与item-一一对应">2. 格式符：与item 一一对应：<a class="hash-link" href="#2-格式符与item-一一对应" title="Direct link to heading">​</a></h5><ul><li>%c:  显示字符的ASCII码</li><li>%d, %i:  显示十进制整数</li><li>%e, %E: 显示科学计数法数值</li><li><strong>%f ：显示为浮点数，小数</strong>  %5.1f，带整数、小数点、整数共5位，小数1位，不够用空格补上</li><li>%g, %G ：以科学计数法或浮点形式显示数值</li><li><strong>%s ：显示字符串</strong>；例：%5s最少5个字符，不够用空格补上，超过5个还继续显示</li><li><strong>%u ：无符号整数</strong></li><li>%%:  显示% 自身</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-修饰符放在cdef之间">3. 修饰符：放在%c<!-- -->[/d/e/f...]<!-- -->之间：<a class="hash-link" href="#3-修饰符放在cdef之间" title="Direct link to heading">​</a></h5><ul><li>#<!-- -->[.#]<!-- -->：第一个数字控制显示的宽度；第二个# 表示小数点后精度，%5.1f</li><li>-：左对齐（<strong>默认右对齐</strong>） %-15s</li><li>+：显示数值的正负符号 %+d</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{print $1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---第一列显示小于20的字符串；第2列显示整数并换行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{printf &quot;%20s---%u\n&quot;,$1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                root---0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 bin---1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---使用-进行左对齐；第2列显示浮点数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{printf &quot;%-20s---%-10.3f\n&quot;,$1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root                ---0.000    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin                 ---1.000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---使用printf做表格</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;BEGIN{printf &quot;username            userid\n-----------------------------\n&quot;}{printf &quot;%-20s|%-10.3f\n&quot;,$1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">username            userid</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">-----------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root                </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">0.000</span><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin                 </span><span class="token operator" style="color:#393A34">|</span><span class="token number" style="color:#36acaa">1.000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="3-操作符">3. 操作符:<a class="hash-link" href="#3-操作符" title="Direct link to heading">​</a></h4><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"> 算术操作符：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    x+y, x-y, x*y, x/y, x^y, x%y</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -x:  转换为负数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    +x:  转换为数值</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 字符串操作符：没有符号的操作符，字符串连接</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 赋值操作符：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">=</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">+=</span><span class="token plain">, -</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">, *</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">, /</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">, %</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">, ^</span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ++, --</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 比较操作符：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">==</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">, </span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 模式匹配符：~ ：左边是否和右边匹配包含 </span><span class="token operator" style="color:#393A34">!</span><span class="token plain">~ ：是否不匹配 </span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$0</span><span class="token plain"> 代表整行</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 逻辑操作符：与 </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> ，或 </span><span class="token operator" style="color:#393A34">||</span><span class="token plain"> ，非 </span><span class="token operator" style="color:#393A34">!</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 函数调用： function_name</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">argu1, argu2, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> 条件表达式（三元表达式）：selector?if-true-expression:if-false-expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    注释：先判断selector，如果符合执行 ? 后的操作；否则执行 </span><span class="token builtin class-name">:</span><span class="token plain"> 后的操作</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-模式匹配符">1. 模式匹配符：<a class="hash-link" href="#1-模式匹配符" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---查询以/dev开头的磁盘信息</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># df -h |awk -F: &#x27;$0 ~ /^\/dev/&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cl-root   17G  </span><span class="token number" style="color:#36acaa">7</span><span class="token plain">.3G  </span><span class="token number" style="color:#36acaa">9</span><span class="token plain">.7G  </span><span class="token number" style="color:#36acaa">43</span><span class="token plain">% /</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sda1           1014M  121M  894M  </span><span class="token number" style="color:#36acaa">12</span><span class="token plain">% /boot</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---只显示磁盘使用状况和磁盘名</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># df -h |awk &#x27;$0 ~ /^\/dev/{print $(NF-1)&quot;---&quot;$1}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">43</span><span class="token plain">%---/dev/mapper/cl-root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">12</span><span class="token plain">%---/dev/sda1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---查找磁盘大于40%的</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># df -h |awk &#x27;$0 ~ /^\/dev/{print $(NF-1)&quot;---&quot;$1}&#x27; | awk -F% &#x27;$1 &gt; 40&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">43</span><span class="token plain">%---/dev/mapper/cl-root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-逻辑操作符">2. 逻辑操作符：<a class="hash-link" href="#2-逻辑操作符" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;$3&gt;=0 &amp;&amp; $3&lt;=1000 {print $1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;$3==0 || $3&gt;=1000 {print $1}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;!($3==0) {print $1}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;!($0 ~ /bash$/) {print $1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">daemon </span><span class="token number" style="color:#36acaa">2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-条件表达式三元表达式">3. 条件表达式（三元表达式）：<a class="hash-link" href="#3-条件表达式三元表达式" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{$3 &gt;= 1000?usertype=&quot;common user&quot;:usertype=&quot;sysadmin user&quot;;print usertype,$1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sysadmin user root </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">common user along </span><span class="token number" style="color:#36acaa">1000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="4-pattern-匹配部分正则">4. PATTERN 匹配部分（正则）<a class="hash-link" href="#4-pattern-匹配部分正则" title="Direct link to heading">​</a></h4><p>PATTERN：根据pattern 条件，过滤匹配的行，再做处理</p><p>（1）如果未指定：空模式，匹配每一行</p><p>（2）/regular expression/ ：仅处理能够模式匹配到的行，<strong>正则</strong>，需要用/ / 括起来</p><p>（3）relational expression：<strong>关系表达式，结果为“真”才会被处理</strong></p><p>真：结果为非0值，非空字符串</p><p>假：结果为空字符串或0值</p><p>（4）line ranges：行范围</p><p>　　startline(起始行),endline(结束行)：/pat1/,/pat2/  不支持直接给出数字，可以有多段，中间可以有间隔</p><p>（5）BEGIN/END 模式</p><p>　　BEGIN{}:  仅在开始处理文件中的文本之前执行一次</p><p>　　END{} ：仅在文本处理完成之后执行</p><p>示例：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{print $1}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;/along/{print $1}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;1{print $1}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;0{print $1}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;/^h/,/^a/{print $1}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;BEGIN{print &quot;第一列&quot;}{print $1} END{print &quot;结束&quot;}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">第一列</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">结束</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h4 class="anchor anchorWithStickyNavbar_LWe7" id="5-高阶用法">5. 高阶用法：<a class="hash-link" href="#5-高阶用法" title="Direct link to heading">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="1-if-">1. if ：<a class="hash-link" href="#1-if-" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">condition</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">statement</span><span class="token variable punctuation" style="color:#393A34">;</span><span class="token variable" style="color:#36acaa">…</span><span class="token variable punctuation" style="color:#393A34">}</span><span class="token variable punctuation" style="color:#393A34">[</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">else</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">statement</span><span class="token variable punctuation" style="color:#393A34">]</span><span class="token variable" style="color:#36acaa"> 双分支</span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="display:inline-block;color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa"></span><span class="token variable keyword" style="color:#00009f">if</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">condition1</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">statement1</span><span class="token variable punctuation" style="color:#393A34">}</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">else</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">if</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">condition2</span><span class="token variable punctuation" style="color:#393A34">)</span><span class="token variable punctuation" style="color:#393A34">{</span><span class="token variable" style="color:#36acaa">statement2</span><span class="token variable punctuation" style="color:#393A34">}</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable" style="color:#36acaa">`</span><span class="token variable keyword" style="color:#00009f">else</span><span class="token variable" style="color:#36acaa">`</span><span class="token plain">`</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">statement3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> 多分支</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>使用场景：对awk 取得的整行或某个字段做条件判断</p><p>示例：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{if($3&gt;10 &amp;&amp; $3&lt;1000)print $1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">operator </span><span class="token number" style="color:#36acaa">11</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">games </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{if($NF==&quot;/bin/bash&quot;) print $1,$NF}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along /bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---输出总列数大于3的行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{if(NF&gt;2) print $0}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux:redhat:lalala:hahaha</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along:love:you</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---第3列</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">为Common user，反之是root or Sysuser</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{if($3&gt;=1000) {printf &quot;Common user: %s\n&quot;,$1} else{printf &quot;root or Sysuser: %s\n&quot;,$1}}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root or Sysuser: root</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">root or Sysuser: bin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Common user: along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---磁盘利用率超过40的设备名和利用率</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># df -h|awk -F% &#x27;/^\/dev/{print $1}&#x27;|awk &#x27;$NF &gt; 40{print $1,$NF}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/mapper/cl-root </span><span class="token number" style="color:#36acaa">43</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---test</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">100</span><span class="token plain">和</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">90</span><span class="token plain">为very good</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9</span><span class="token operator file-descriptor important" style="color:#393A34">0</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">test</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token number" style="color:#36acaa">60</span><span class="token plain">为good</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> test</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token number" style="color:#36acaa">60</span><span class="token plain">为no pass</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{ test=100;if(test&gt;90){print &quot;very good&quot;}else if(test&gt;60){ print &quot;good&quot;}else{print &quot;no pass&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">very good</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{ test=80;if(test&gt;90){print &quot;very good&quot;}else if(test&gt;60){ print &quot;good&quot;}else{print &quot;no pass&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">good</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{ test=50;if(test&gt;90){print &quot;very good&quot;}else if(test&gt;60){ print &quot;good&quot;}else{print &quot;no pass&quot;}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">no pass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="2-while">2. while：<a class="hash-link" href="#2-while" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">condition</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">statement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">…</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>　对一行内的多个字段逐一类似处理时使用</p><p>　对数组中的各元素逐一处理时使用</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---以along开头的行，以：为分隔，显示每一行的每个单词和其长度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;/^along/{i=1;while(i&lt;=NF){print $i,length($i); i++}}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">love </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">you </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---以：为分隔，显示每一行的长度大于6的单词和其长度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{i=1;while(i&lt;=NF) {if(length($i)&gt;=6){print $i,length($i)}; i++}}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redhat </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lalala </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hahaha </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---计算1+2+3+</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.+100</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5050</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{i=1;sum=0;while(i&lt;=100){sum+=i;i++};print sum}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5050</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="3-do-while">3. do-while：<a class="hash-link" href="#3-do-while" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">do</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">statement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">…</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">while</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">condition</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">计算1+2+3+</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.+100</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5050</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{sum=0;i=1;do{sum+=i;i++}while(i&lt;=100);print sum}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">5050</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="4-for">4. for：<a class="hash-link" href="#4-for" title="Direct link to heading">​</a></h5><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expr1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">expr2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">expr3</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">statement</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">…</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>特殊用法：遍历数组中的元素（接下来 介绍）</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">for</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">var </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> array</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">for-body</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---显示每一行的每个单词和其长度</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{for(i=1;i&lt;=NF;i++) {print$i,length($i)}}&#x27; awkdemo</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hello </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">world </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">linux </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">redhat </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lalala </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hahaha </span><span class="token number" style="color:#36acaa">6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along </span><span class="token number" style="color:#36acaa">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">love </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">you </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---求男m、女f各自的平均</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat sort.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xiaoming m </span><span class="token number" style="color:#36acaa">90</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xiaohong f </span><span class="token number" style="color:#36acaa">93</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xiaohei m </span><span class="token number" style="color:#36acaa">80</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">xiaofang f </span><span class="token number" style="color:#36acaa">99</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;{m[$2]++;score[$2]+=$3}END{for(i in m){printf &quot;%s:%6.2f\n&quot;,i,score[i]/m[i]}}&#x27; sort.txt</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">m: </span><span class="token number" style="color:#36acaa">85.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">f: </span><span class="token number" style="color:#36acaa">96.00</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="5-和shell脚本中较相似的控制语句">5. 和shell脚本中较相似的控制语句：<a class="hash-link" href="#5-和shell脚本中较相似的控制语句" title="Direct link to heading">​</a></h5><h6 class="anchor anchorWithStickyNavbar_LWe7" id="1-switch语句">1. switch语句：<a class="hash-link" href="#1-switch语句" title="Direct link to heading">​</a></h6><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">switch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">expression</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">case VALUE1 or /REGEXP/:statement1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">case</span><span class="token plain"> VALUE2 or /REGEXP2/: statement2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> default: statementn</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="2-break和continue">2. break和continue：<a class="hash-link" href="#2-break和continue" title="Direct link to heading">​</a></h6><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---奇数相加</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{sum=0;for(i=1;i&lt;=100;i++){if(i%2==0)continue;sum+=i}print sum}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2500</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---1+2+</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.+66</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{sum=0;for(i=1;i&lt;=100;i++){if(i==66)break;sum+=i}print sum}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">2145</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="3-next">3. next：<a class="hash-link" href="#3-next" title="Direct link to heading">​</a></h6><p>提前结束对本行处理而直接进入下一行处理（awk 自身循环）</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">---只打印偶数行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -F: &#x27;{if(NR%2!=0) next; print $1,$3}&#x27; /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bin </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">adm </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h5 class="anchor anchorWithStickyNavbar_LWe7" id="6-数组">6. 数组：<a class="hash-link" href="#6-数组" title="Direct link to heading">​</a></h5><p><strong>关联数组：array<!-- -->[index-expression]</strong></p><p>（1）可使用任意字符串；字符串要使用双引号括起来</p><p>（2）如果某数组元素事先不存在，在引用时，awk 会自动创建此元素，并将其值初始化为“空串”</p><p>（3）若要判断数组中是否存在某元素，要使用“index in array”格式进行<strong>遍历</strong></p><p>（4）若要<strong>遍历数组中的每个元素</strong>，要使用for 循环<strong>：for(var in array)</strong> {for-body}</p><ol><li>awk使用数组</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat awkdemo2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bbbb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---去除重复的行</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;!arr[$0]++&#x27; awkdemo2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bbbb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---打印文件内容，和该行重复第几次出现</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;{!arr[$0]++;print $0,arr[$0]}&#x27; awkdemo2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bbbb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>数组遍历</li></ol><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{abc[&quot;ceo&quot;]=&quot;along&quot;;abc[&quot;coo&quot;]=&quot;mayun&quot;;abc[&quot;cto&quot;]=&quot;mahuateng&quot;;for(i in abc){print i,abc[i]}}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">coo mayun</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ceo along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cto mahuateng</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;{for(i=1;i&lt;=NF;i++)abc[$i]++}END{for(j in abc)print j,abc[j]}&#x27; awkdemo2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aaa </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">bbbb </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">123</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="2-数值字符串处理">2. 数值\字符串处理：<a class="hash-link" href="#2-数值字符串处理" title="Direct link to heading">​</a></h6><ol><li>数值处理</li></ol><ul><li>rand()：返回0和1之间一个随机数，需有个种子 srand()，没有种子，一直输出0.237788</li></ul><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{print rand()}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0.237788</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{srand(); print rand()}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0.51692</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{srand(); print rand()}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">0.189917</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">---取0-50随机数</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{srand(); print int(rand()*100%50)+1}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">12</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{srand(); print int(rand()*100%50)+1}&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">24</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>字符串处理</li></ol><ul><li>length(<!-- -->[s]<!-- -->) ：返回指定字符串的长度</li><li>sub(r,s,<!-- -->[t]<!-- -->) ：对t 字符串进行搜索r 表示的模式匹配的内容，并<strong>将第一个</strong>匹配的内容替换为s</li><li>gsub(r,s,<!-- -->[t]<!-- -->) ：对t 字符串进行搜索r 表示的模式匹配的内容，<strong>并全部替换</strong>为s 所表示的内容</li><li>plit(s,array,<!-- -->[r]<!-- -->) ：以r 为分隔符，切割字符串s ，并将切割后的结果保存至array 所表示的数组中，第一个索引值为1, 第二个索引值为2,…</li></ul><div class="language-shel codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shel codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[root@along ~]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;sub(/:/,&quot;-&quot;,$1)&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2008-08:08 08:08:08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@along ~]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;gsub(/:/,&quot;-&quot;,$0)&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2008-08-08 08-08-08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[root@along ~]# echo &quot;2008:08:08 08:08:08&quot; | awk &#x27;{split($0,i,&quot;:&quot;)}END{for(n in i){print n,i[n]}}&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">4 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">1 2008</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2 08</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">3 08 08</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="3-自定义函数">3. 自定义函数：<a class="hash-link" href="#3-自定义函数" title="Direct link to heading">​</a></h6><p>和bash区别：定义函数（）中需加参数，return返回值不是$?，是相当于echo输出</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> name </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"> parameter, parameter, </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    statements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">return</span><span class="token plain"> expression</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat fun.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">v1,v2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    v</span><span class="token operator file-descriptor important" style="color:#393A34">1</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">v2?var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">v1:var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">return</span><span class="token plain"> var</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BEGIN</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">a</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token assign-left variable" style="color:#36acaa">b</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">print max</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">a,b</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk -f fun.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token number" style="color:#36acaa">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h6 class="anchor anchorWithStickyNavbar_LWe7" id="4-awk中调用shell-命令">4. awk中调用shell 命令：<a class="hash-link" href="#4-awk中调用shell-命令" title="Direct link to heading">​</a></h6><p>（1）system 命令</p><p>　　空格是awk 中的字符串连接符，如果system中需要使用awk中的变量可以使用空格分隔，或者说除了awk 的变量外其他一律用&quot;&quot; 引用 起来。</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk BEGIN&#x27;{system(&quot;hostname&quot;) }&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{name=&quot;along&quot;;system(&quot;echo &quot;name)}&#x27;  注：&quot;echo &quot; echo后有空格</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># awk &#x27;BEGIN{score=100; system(&quot;echo your score is &quot; score) }&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">your score is </span><span class="token number" style="color:#36acaa">100</span><span class="token plain">　</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>（2）awk 脚本</p><p>将awk 程序写成脚本，直接调用或执行</p><p>示例：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat f1.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$3</span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">print </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain">,</span><span class="token variable" style="color:#36acaa">$3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat f2.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#!/bin/awk -f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">print </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain">,</span><span class="token variable" style="color:#36acaa">$3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># chmod +x f2.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># ./f2.awk -F: /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">along </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain">　</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>（3）向awk脚本传递参数</p><p>① 格式：</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">awkfile </span><span class="token assign-left variable" style="color:#36acaa">var</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value </span><span class="token assign-left variable" style="color:#36acaa">var2</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">value2</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">. Inputfile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>　　注意 ：在BEGIN 过程 中不可用。直到 首行输入完成以后，变量才可用 。可以通过<strong>-v  参数</strong>，让awk 在执行BEGIN 之前得到变量的值。命令行中每一个指定的变量都需要一个-v</p><p>② 示例</p><div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># cat test.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#!/bin/awk -f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$3</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;=</span><span class="token plain">min </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$3</span><span class="token operator" style="color:#393A34">&lt;=</span><span class="token plain">max</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">print </span><span class="token variable" style="color:#36acaa">$1</span><span class="token plain">,</span><span class="token variable" style="color:#36acaa">$3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># chmod +x test.awk</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">root@along ~</span><span class="token punctuation" style="color:#393A34">]</span><span class="token comment" style="color:#999988;font-style:italic"># ./test.awk -F: min=100 max=200 /etc/passwd</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">systemd-network </span><span class="token number" style="color:#36acaa">192</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/learn/Linux&amp;Shell/Shell/函数"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">函数</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/learn/Markdown/Markdown 基本语法"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Markdown 基本语法</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-cut" class="table-of-contents__link toc-highlight">1. cut：</a></li><li><a href="#2-linux-文本三剑客" class="table-of-contents__link toc-highlight">2. Linux 文本三剑客：</a><ul><li><a href="#1-grep" class="table-of-contents__link toc-highlight">1. grep：</a></li><li><a href="#2-sed" class="table-of-contents__link toc-highlight">2. sed：</a></li><li><a href="#3-awk" class="table-of-contents__link toc-highlight">3. awk：</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/learn/assets/js/runtime~main.e544f3c4.js"></script>
<script src="/learn/assets/js/main.de0215e4.js"></script>
</body>
</html>